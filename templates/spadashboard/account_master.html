{% extends 'spadashboard/index.html' %}
{% load static %}
{% block heading %}

<div class="page-title-wrapper">
	<div class="page-title-heading">
		<div class="page-title-icon">
			<i class="fa fa-university icon-gradient bg-mean-fruit">
			</i>
		</div>
		<div>
			Account Master
			<div class="page-title-subheading">You can manage your Accounts here.
			</div>
		</div>
	</div>
	<div class="page-title-actions">
		<button id="btnaddaccount" type="button" class="btn btn-info">
			<span class="btn-icon-wrapper">
				<i class="fa fa-university fa-fw"></i>
			</span>
			Add Account
		</button>
	</div>
</div>
{% endblock %}
{% block home %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
	$(document).ready(function () {
		$("#accountaddsection").hide();
		$("#btnaddaccount").click(function () {
			$("#accountaddsection").toggle();
		});
	});
</script>

<!--Add Account-->
<div class="container-fluid p-3 mb-3 rounded bg-white" id="accountaddsection">
	<div class="row">
		<div class="col-md-12 text-center">
			<h4>Add Account</h4>
			<hr />
		</div>
    </div>
    <form method="post">
        {% csrf_token %}
        <div class="row">
            <div class="col-md-6">
                <select style="width:100%" name="branch_master" id="branchMaster" required>
                    <option value="">--Select Branch Master--</option>
                    {% for master in branch_master %}
                        <option value="{{master.id}}">{{master.name}}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-6">
                <select style="width:100%" name="group_master" id="groupMaster" required>
                    <option value="">--Select Group Master--</option>
                    {% for master in group_master %}
                        <option value="{{master.id}}">{{master.name}}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <div class="row mt-2">
            <div class="col-md-6">
                <input type="text" name="name" placeholder="Account Name" class="form-control" required>
            </div>
            <div class="col-md-6">
                <input type="text" name="address_1" placeholder="Address - 1" class="form-control" required>
            </div>
        </div>
        <div class="row mt-2">
            <div class="col-md-6">
                <input type="text" name="address_2" placeholder="Address - 2" class="form-control" required>
            </div>
            <div class="col-md-6">
                <input type="text" name="address_3" placeholder="Address - 3" class="form-control" required>
            </div>
        </div>
        <div class="row mt-2">
            <div class="col-md-6">
                <select style="width:100%" name="city" id="cityId" required>
                    <option value="">--Select City--</option>
                    {% for city in cities %}
                        <option value="{{city.id}}">{{city.name}}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-6">
                <input type="text" name="pincode" placeholder="Pin Code" class="form-control" required>
            </div>
        </div>
        <div class="row mt-2">
            <div class="col-md-6">
                <input type="text" name="state" placeholder="State" class="form-control" required>
            </div>
            <div class="col-md-6">
                <input type="text" name="mobile_number" placeholder="Mobile Number" class="form-control" required>
            </div>
        </div>
        <hr/>
        <div class="row mt-2">
            <div class="col-md-12 text-center">
                <input type="submit" value="Create Account" class="btn btn-success font-weight-bold btn-lg">
            </div>
        </div>
    </form>
</div>

<!--Account List -->
<div class="container-fluid p-3 mb-3 rounded bg-white">
	<div class="row">
		<div class="col-md-12 text-center">
			<h4>Account List</h4>
			<hr />
		</div>
        <div class="col-md-12 table-responsive">
            <table class="table table-striped table-condensed">
        <thead class="bg-light">
            <tr>
                <th>Acc Code#</th>
                <th>Acc name</th>
                <th>Group Code</th>
                <th>Address 1</th>
                <th>Address 2</th>
                <th>Address 3</th>
                <th>City</th>
                <th>Pin-Code</th>
                <th>State</th>
                <th>Mobile</th>
            </tr>
        </thead>
        <tbody>
            {% for master in account_master %}
                <tr>
                    <td>{{master.code}}</td>
                    <td>{{master.name}}</td>
                    <td>{{master.group_master.code}}</td>
                    <td>{{master.address_1}}</td>
                    <td>{{master.address_2}}</td>
                    <td>{{master.address_3}}</td>
                    <td>{{master.city.name}}</td>
                    <td>{{master.pincode}}</td>
                    <td>{{master.state}}</td>
                    <td>{{master.mobile_number}}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
            </div>
	</div>
</div>

<script>
    $(document).ready(function() {
        $('#branchMaster').select2({
            theme: "classic"
        });
    });

    $(document).ready(function() {
        $('#groupMaster').select2({
            theme: "classic"
        });
    }); 

    $(document).ready(function() {
        $('#cityId').select2({
            theme: "classic"
        });
    }); 
</script>
{% endblock %}